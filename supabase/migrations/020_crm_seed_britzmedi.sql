-- 020_crm_seed_britzmedi.sql
-- BRITZMEDI 시드 데이터: 테넌트, 사용자, 제품, 프랜차이즈, 병원, 담당자, 장비

-- ===== 테넌트 =====
INSERT INTO tenants (id, name, domain, plan, admin_name, admin_email, admin_phone)
VALUES (
  'a1b2c3d4-0001-4000-8000-000000000001',
  'BRITZMEDI',
  'britzmedi.co.kr',
  'pro',
  '이성호',
  'sh.lee@britzmedi.co.kr',
  '010-1234-5678'
) ON CONFLICT (id) DO NOTHING;

-- ===== 사용자 =====
INSERT INTO users (id, tenant_id, name, email, role)
VALUES (
  'a1b2c3d4-0002-4000-8000-000000000001',
  'a1b2c3d4-0001-4000-8000-000000000001',
  '이성호',
  'sh.lee@britzmedi.co.kr',
  'admin'
) ON CONFLICT (id) DO NOTHING;

-- ===== 프랜차이즈 =====
INSERT INTO crm_franchises (id, tenant_id, name, total_branches, equipped_branches)
VALUES
  ('a1b2c3d4-0010-4000-8000-000000000001', 'a1b2c3d4-0001-4000-8000-000000000001', '크리미의원', 6, 1),
  ('a1b2c3d4-0010-4000-8000-000000000002', 'a1b2c3d4-0001-4000-8000-000000000001', '휴먼피부과', 5, 1)
ON CONFLICT (id) DO NOTHING;

-- ===== 제품 =====
INSERT INTO crm_products (id, tenant_id, name, model_variants, price_range, warranty_months, consumables)
VALUES
  (
    'a1b2c3d4-0020-4000-8000-000000000001',
    'a1b2c3d4-0001-4000-8000-000000000001',
    'TORR RF',
    ARRAY['KE-MT', 'BM-MT'],
    '2500~2800만원',
    24,
    '[{"name":"RF팁","cycle_days":60,"price":150000},{"name":"쿨링젤","cycle_days":null,"price":30000}]'::jsonb
  ),
  (
    'a1b2c3d4-0020-4000-8000-000000000002',
    'a1b2c3d4-0001-4000-8000-000000000001',
    'ULBLANC',
    ARRAY['UB-100'],
    '1800~2200만원',
    24,
    '[]'::jsonb
  ),
  (
    'a1b2c3d4-0020-4000-8000-000000000003',
    'a1b2c3d4-0001-4000-8000-000000000001',
    'NEWCHAE SHOT',
    ARRAY['NC-S1'],
    '1200~1500만원',
    12,
    '[{"name":"시술팁","cycle_days":30,"price":80000}]'::jsonb
  )
ON CONFLICT (id) DO NOTHING;

-- ===== 병원 =====
INSERT INTO crm_hospitals (id, tenant_id, name, branch_name, address, region, phone, customer_grade, health_status, franchise_id, assigned_to, report_enabled)
VALUES
  (
    'a1b2c3d4-0030-4000-8000-000000000001',
    'a1b2c3d4-0001-4000-8000-000000000001',
    '크리미의원', '유성점',
    '대전 유성구 대학로 9',
    '대전',
    '042-123-4567',
    'A', 'green',
    'a1b2c3d4-0010-4000-8000-000000000001',
    'a1b2c3d4-0002-4000-8000-000000000001',
    true
  ),
  (
    'a1b2c3d4-0030-4000-8000-000000000002',
    'a1b2c3d4-0001-4000-8000-000000000001',
    '휴먼피부과', '평택점',
    '경기 평택시 중앙로 77',
    '경기',
    '031-654-3210',
    'A', 'green',
    'a1b2c3d4-0010-4000-8000-000000000002',
    'a1b2c3d4-0002-4000-8000-000000000001',
    true
  ),
  (
    'a1b2c3d4-0030-4000-8000-000000000003',
    'a1b2c3d4-0001-4000-8000-000000000001',
    '르벨의원', NULL,
    '서울 강남구 논현로 512',
    '서울',
    '02-555-1234',
    'B', 'yellow',
    NULL,
    'a1b2c3d4-0002-4000-8000-000000000001',
    true
  ),
  (
    'a1b2c3d4-0030-4000-8000-000000000004',
    'a1b2c3d4-0001-4000-8000-000000000001',
    '리노보의원', NULL,
    '부산 해운대구 센텀로 99',
    '부산',
    '051-777-8888',
    'B', 'orange',
    NULL,
    'a1b2c3d4-0002-4000-8000-000000000001',
    true
  ),
  (
    'a1b2c3d4-0030-4000-8000-000000000005',
    'a1b2c3d4-0001-4000-8000-000000000001',
    '메이린의원', '강남점',
    '서울 강남구 테헤란로 123',
    '서울',
    '02-333-9999',
    'VIP', 'green',
    NULL,
    'a1b2c3d4-0002-4000-8000-000000000001',
    true
  )
ON CONFLICT (id) DO NOTHING;

-- ===== 담당자 =====
INSERT INTO crm_contacts (id, hospital_id, tenant_id, name, role, is_primary, phone, email, preferred_contact)
VALUES
  -- 크리미의원 유성점
  ('a1b2c3d4-0040-4000-8000-000000000001', 'a1b2c3d4-0030-4000-8000-000000000001', 'a1b2c3d4-0001-4000-8000-000000000001',
   '정호영', '원장', true, '010-1111-2222', 'jhy@crimiclinic.kr', 'kakao'),
  ('a1b2c3d4-0040-4000-8000-000000000002', 'a1b2c3d4-0030-4000-8000-000000000001', 'a1b2c3d4-0001-4000-8000-000000000001',
   '김수진', '실장', false, '010-3333-4444', NULL, 'phone'),

  -- 휴먼피부과 평택점
  ('a1b2c3d4-0040-4000-8000-000000000003', 'a1b2c3d4-0030-4000-8000-000000000002', 'a1b2c3d4-0001-4000-8000-000000000001',
   '박민수', '원장', true, '010-5555-6666', 'park@humanderm.kr', 'email'),

  -- 르벨의원
  ('a1b2c3d4-0040-4000-8000-000000000004', 'a1b2c3d4-0030-4000-8000-000000000003', 'a1b2c3d4-0001-4000-8000-000000000001',
   '이지연', '원장', true, '010-7777-8888', 'lee@lebelle.kr', 'kakao'),

  -- 리노보의원
  ('a1b2c3d4-0040-4000-8000-000000000005', 'a1b2c3d4-0030-4000-8000-000000000004', 'a1b2c3d4-0001-4000-8000-000000000001',
   '최현우', '원장', true, '010-9999-0000', 'choi@rinovo.kr', 'phone'),
  ('a1b2c3d4-0040-4000-8000-000000000006', 'a1b2c3d4-0030-4000-8000-000000000004', 'a1b2c3d4-0001-4000-8000-000000000001',
   '한미영', '간호사', false, '010-1234-0000', NULL, 'kakao'),

  -- 메이린의원 강남점
  ('a1b2c3d4-0040-4000-8000-000000000007', 'a1b2c3d4-0030-4000-8000-000000000005', 'a1b2c3d4-0001-4000-8000-000000000001',
   '강서현', '원장', true, '010-2222-3333', 'kang@maylin.kr', 'email')
ON CONFLICT (id) DO NOTHING;

-- ===== 장비 =====
INSERT INTO crm_equipment (id, hospital_id, tenant_id, product_id, serial_number, model_variant, delivered_at, warranty_end, firmware_version, status, condition)
VALUES
  -- 크리미의원 유성점: TORR RF 1대
  ('a1b2c3d4-0050-4000-8000-000000000001',
   'a1b2c3d4-0030-4000-8000-000000000001', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000001',
   'KE-MT-24-03-001', 'KE-MT', '2024-03-15', '2026-03-15', 'v2.1.3', 'active', 'new'),

  -- 휴먼피부과 평택점: TORR RF 1대
  ('a1b2c3d4-0050-4000-8000-000000000002',
   'a1b2c3d4-0030-4000-8000-000000000002', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000001',
   'BM-MT-24-06-002', 'BM-MT', '2024-06-20', '2026-06-20', 'v2.1.3', 'active', 'new'),

  -- 르벨의원: TORR RF + ULBLANC
  ('a1b2c3d4-0050-4000-8000-000000000003',
   'a1b2c3d4-0030-4000-8000-000000000003', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000001',
   'KE-MT-23-11-003', 'KE-MT', '2023-11-10', '2025-11-10', 'v2.0.8', 'active', 'new'),
  ('a1b2c3d4-0050-4000-8000-000000000004',
   'a1b2c3d4-0030-4000-8000-000000000003', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000002',
   'UB-100-25-01-001', 'UB-100', '2025-01-05', '2027-01-05', 'v1.0.0', 'active', 'new'),

  -- 리노보의원: TORR RF 1대
  ('a1b2c3d4-0050-4000-8000-000000000005',
   'a1b2c3d4-0030-4000-8000-000000000004', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000001',
   'BM-MT-24-01-004', 'BM-MT', '2024-01-20', '2026-01-20', 'v2.1.0', 'active', 'new'),

  -- 메이린의원 강남점: TORR RF + NEWCHAE SHOT
  ('a1b2c3d4-0050-4000-8000-000000000006',
   'a1b2c3d4-0030-4000-8000-000000000005', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000001',
   'KE-MT-23-06-005', 'KE-MT', '2023-06-01', '2025-06-01', 'v2.1.3', 'active', 'new'),
  ('a1b2c3d4-0050-4000-8000-000000000007',
   'a1b2c3d4-0030-4000-8000-000000000005', 'a1b2c3d4-0001-4000-8000-000000000001', 'a1b2c3d4-0020-4000-8000-000000000003',
   'NC-S1-25-02-001', 'NC-S1', '2025-02-10', '2026-02-10', 'v1.0.0', 'active', 'new')
ON CONFLICT (id) DO NOTHING;
