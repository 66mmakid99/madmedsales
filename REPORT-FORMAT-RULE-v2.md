# MADMEDSALES 크롤링 테스트 보고서 작성 규칙

> Claude Code는 병원 크롤링 + 분석 완료 후, 아래 형식에 따라 보고서를 작성한다.
> 파일명: `report_{병원ID}_{날짜}.md`
> 저장 위치: `output/reports/`

---

## 보고서 구조

```
1. 요약 (Executive Summary)
2. 크롤링 현황
3. 추출 결과 상세
4. 품질 분석
5. 이슈 & 경고
6. 영업 활용 인사이트
7. 다음 조치
```

---

## 1. 요약 (Executive Summary)

맨 위에 한눈에 볼 수 있는 요약 박스를 작성한다.

```markdown
# 📋 크롤링 보고서: {병원명}

| 항목 | 결과 |
|------|------|
| 병원명 | {병원명} ({지역}) |
| URL | {website_url} |
| 실행 버전 | v5.4 |
| 실행 일시 | {YYYY-MM-DD HH:mm} |
| 총 소요 시간 | {분:초} |
| **최종 판정** | **✅ PASS** 또는 **❌ FAIL** (사유: ...) |

### 핵심 수치
| 카테고리 | 추출 건수 | 품질 판정 |
|----------|-----------|-----------|
| 👨‍⚕️ 의사 | {N}명 | ✅ 양호 / ⚠️ 검증필요 / ❌ 미흡 |
| 📚 학술활동 | {N}건 | ✅ / ⚠️ / ❌ |
| 🔧 장비 | {N}종 | ✅ / ⚠️ / ❌ |
| 💉 시술 | {N}개 | ✅ / ⚠️ / ❌ |
| 💰 가격 확보율 | {N}/{M} ({%}) | ✅ / ⚠️ / ❌ |
| 🎪 이벤트 | {N}건 | ✅ / ⚠️ / ❌ |
| 🏷️ 클리닉 카테고리 | {N}개 | ✅ / ⚠️ / ❌ |
| 📞 컨택 포인트 | 이메일 {Y/N}, 전화 {Y/N}, SNS {N}개 | ✅ / ⚠️ / ❌ |

### 한줄 요약
> {이 병원 크롤링의 핵심 결과를 1~2문장으로. 예: "47명 의사 전원 모달 캡처 성공, 장비 16종 확인. 가격 정보가 68개 중 12개만 확보되어 영업 시 직접 확인 필요."}
```

### 품질 판정 기준
- ✅ 양호: 기대치 대비 80% 이상 추출, 오류 없음
- ⚠️ 검증필요: 추출은 됐으나 정확성 미확인 또는 50~79%
- ❌ 미흡: 50% 미만이거나 명백한 오류 존재

---

## 2. 크롤링 현황

```markdown
## 📡 크롤링 현황

### 페이지 수집
| 항목 | 수치 |
|------|------|
| 발견된 총 URL | {N}개 |
| 필터 통과 | {N}개 |
| 크롤 성공 | {N}개 |
| 크롤 실패 (timeout/error) | {N}개 |
| SPA 중복 스킵 (해시 동일) | {N}개 |
| URL 중복 스킵 (정규화) | {N}개 |

### Firecrawl 크레딧
| 항목 | 수치 |
|------|------|
| 이번 크롤 사용 | {N} 크레딧 |
| 잔여 크레딧 | {N} 크레딧 |

### 보강 크롤
| 경로 | 결과 | 추가 정보 |
|------|------|-----------|
| /doctor | ✅ 성공 / ❌ 404 | 의사 {N}명 추가 발견 |
| /treatment | ✅ / ❌ | 시술 {N}개 추가 |
| ... | ... | ... |

### 특이사항
- {타임아웃 다수 발생 시: "408 타임아웃 {N}건 발생, 전부 fallback 처리"}
- {SPA 감지 시: "SPA 사이트로 판단, 동일 콘텐츠 {N}페이지 스킵"}
- {모달 처리 시: "의사 모달 {N}개 Puppeteer 순차 클릭 완료"}
- {팝업 처리 시: "팝업 {N}개 캡처 → Vision OCR 처리"}
```

---

## 3. 추출 결과 상세

각 카테고리별로 실제 추출된 데이터를 보여준다.

```markdown
## 📊 추출 결과 상세

### 👨‍⚕️ 의사 ({N}명)
| # | 이름 | 직책 | 전문분야 | 이름 검증 | 경력 건수 |
|---|------|------|----------|-----------|-----------|
| 1 | 홍길동 | 원장 | 피부과전문의 | ✅ web_verified | 8건 |
| 2 | 김철수 | 부원장 | 피부과전문의 | ⚠️ ocr_only | 3건 |

> 이름 검증 상태: ✅ web_verified(구글 검색 확인) / ✅ web_corrected(구글 검색으로 교정) / ⚠️ ocr_only(OCR만, 미검증)

### 📚 학술활동 ({N}건)
| # | 유형 | 내용 요약 | 관련 의사 | 연도 |
|---|------|-----------|-----------|------|
| 1 | 논문 | ... | 홍길동 | 2023 |
| 2 | 학회발표 | ... | null | 2024 |

### 🔧 장비 ({N}종)
| # | 브랜드/모델 | 한국어명 | 카테고리 | 출처 |
|---|-------------|----------|----------|------|
| 1 | Thermage FLX | 써마지 | RF | text |
| 2 | Ulthera | 울쎄라 | 초음파 | image_banner |

> 🔎 **TORR RF 보유 여부: ✅ 있음 / ❌ 없음 / ❓ 미확인**
> (BRITZMEDI 영업 핵심 지표)

### 💉 시술 ({N}개, 가격 확보 {M}개)

#### 가격 확보된 시술 (영업 핵심)
| # | 시술명 | 정가 | 표기원문 | 패키지 | 부위 | 회차 |
|---|--------|------|----------|--------|------|------|
| 1 | 써마지 600샷 | 1,500,000원 | 150만원 | N | 얼굴 | 1회 |
| 2 | 울쎄라+써마지 | 2,500,000원 | 250만원 | Y | 얼굴 | - |

#### 패키지/합성어 시술 단가 분석
| 패키지명 | 패키지 가격 | 포함 시술 | 추정 개별 단가 | 추정 근거 |
|----------|-------------|-----------|----------------|-----------|
| 울쎄라+써마지 | 250만원 | 울쎄라, 써마지 | 각 ~125만원 | 균등 배분 추정 |

#### 가격 미확보 시술
| # | 시술명 | 비고 |
|---|--------|------|
| 1 | 보톡스 | 상담필요 |
| 2 | 필러 | 미기재 |

### 🏷️ 클리닉 카테고리 ({N}개)
| 클리닉명 | 소속 시술 수 |
|----------|-------------|
| 리프팅클리닉 | 5개 |
| 탈모클리닉 | 3개 |

### 🎪 이벤트/할인 ({N}건)
| # | 이벤트명 | 유형 | 할인내용 | 기간 | 출처 |
|---|----------|------|----------|------|------|
| 1 | 여름 리프팅 특가 | 할인 | 30% OFF | 7/1~8/31 | popup |
| 2 | 신규 회원 혜택 | 신규고객 | 첫 시술 10만원 할인 | 상시 | text |

### 📞 컨택 포인트
| 채널 | 정보 | 비고 |
|------|------|------|
| 📧 이메일 | {email} | {대표/상담} |
| 📱 전화 | {phone} | {대표/예약/상담} |
| 📍 주소 | {address} | |
| 💬 카카오톡 | {channel_url} | 있음/없음 |
| 📗 네이버예약 | {url} | 있음/없음 |
| 📸 인스타그램 | {url} | 있음/없음 |
| 🎬 유튜브 | {url} | 있음/없음 |
| 📝 블로그 | {url} | 있음/없음 |
| 🕐 운영시간 | 평일 {}, 토 {}, 일 {} | |

> ⚠️ 이메일 없음 → 영업 시 전화 또는 카카오톡 우선 접근
> ⚠️ SNS 없음 → 온라인 마케팅 비활성 병원으로 판단
```

---

## 4. 품질 분석

```markdown
## 🔍 품질 분석

### 커버리지 매트릭스
| 카테고리 | 기대 추출 | 실제 추출 | 커버리지 | 판정 |
|----------|-----------|-----------|----------|------|
| 의사 | {N}명 | {M}명 | {%} | ✅/⚠️/❌ |
| 학술활동 | {N}건 | {M}건 | {%} | ✅/⚠️/❌ |
| 장비 | {N}종 | {M}종 | {%} | ✅/⚠️/❌ |
| 시술 | {N}개 | {M}개 | {%} | ✅/⚠️/❌ |
| 이벤트 | {N}건 | {M}건 | {%} | ✅/⚠️/❌ |

> 기대 추출 수가 0인 카테고리: 커버리지 "N/A" (0/0=100% 금지)

### OCR 품질 (1단계)
| 항목 | 수치 |
|------|------|
| 총 이미지 처리 | {N}장 |
| 텍스트 추출 성공 | {N}장 |
| "텍스트_없음" 반환 | {N}장 |
| "불확실" 표시 항목 | {N}건 |

### 분류 정확도 의심 항목
> 2단계 분류에서 confidence: "uncertain"으로 표시된 항목 목록
| 카테고리 | 항목 | 사유 |
|----------|------|------|
| 의사 | "기문상" | OCR 불확실 → 웹 검증 결과: "문상재" |
| 장비 | "R-FECT" | 브랜드명 불분명 |

### 중복 처리 결과
| 유형 | 감지 건수 | 처리 |
|------|-----------|------|
| 시술명 중복 (공백 차이) | {N}건 | 병합 완료 |
| URL 중복 (trailing slash) | {N}건 | 스킵 |
| 콘텐츠 해시 중복 (SPA) | {N}건 | 스킵 |
```

---

## 5. 이슈 & 경고

```markdown
## ⚠️ 이슈 & 경고

### 🔴 심각 (데이터 신뢰도 영향)
- {있으면 기술. 예: "의사 이름 OCR 오류 2건 - 웹 검증으로 교정됨"}

### 🟡 주의 (확인 필요)
- {있으면 기술. 예: "학술활동 3건의 연도 정보 없음"}

### 🟢 참고
- {있으면 기술. 예: "408 타임아웃 5건 발생, 전부 fallback 처리 완료"}

### 미추출 사유
| 카테고리 | 미추출 항목 | 사유 |
|----------|-------------|------|
| 가격 | 보톡스 단가 | 웹사이트에 미기재 (상담 유도) |
| 장비 | - | 텍스트/이미지 모두 장비 언급 없음 |
```

---

## 6. 영업 활용 인사이트

> 이 섹션이 보고서의 핵심 가치. 크롤링 데이터를 TORR RF 영업 관점에서 해석한다.

```markdown
## 💡 영업 활용 인사이트

### 경쟁 장비 현황
| 보유 장비 | 카테고리 | TORR RF와 관계 |
|-----------|----------|----------------|
| 써마지 FLX | RF | 직접 경쟁 |
| 울쎄라 | 초음파 | 보완 관계 |
| 인모드 | RF | 직접 경쟁 |

### 가격대 분석
- RF 시술 가격대: {최저}~{최고}원
- 리프팅 시술 가격대: {최저}~{최고}원
- 패키지 평균 가격: {금액}원
> TORR RF 예상 도입 시 가격 포지셔닝 참고

### 의사진 규모 & 특성
- 총 {N}명 ({원장 N명, 부원장 N명, 진료원장 N명})
- 주요 전문: {피부과전문의 N명, ...}
- 학술 활동 활발도: {상/중/하}

### 이벤트/프로모션 성향
- 이벤트 빈도: {상시 N건, 시즌 N건}
- 주요 할인 방식: {%, 금액 할인, 패키지 등}
- 신규 고객 유치 전략: {있으면 기술}

### 영업 접근 추천
> 이 병원의 특성을 고려한 TORR RF 영업 포인트 1~3개
> 예시:
> 1. 써마지 위주 → TORR RF의 차별점(시술 시간, 통증, 가격) 어필
> 2. 의사 47명 대형 병원 → 시연 이벤트/교육 프로그램 제안
> 3. 이벤트 활발 → TORR RF 론칭 프로모션 공동 기획 제안

### 최적 컨택 전략
> 수집된 연락처 기반으로 최적의 접근 채널 추천
> 예시:
> - 1순위: 이메일 (info@hospital.com) → 콜드메일 발송
> - 2순위: 카카오톡 채널 → 상담 문의 형태로 접근
> - 3순위: 대표전화 (02-XXX-XXXX) → 원장님 면담 요청
> - 참고: 인스타그램 활발 (팔로워 N명) → DM 영업도 고려
```

---

## 7. 다음 조치

```markdown
## ✅ 다음 조치

### 자동 조치 (시스템)
- [ ] Supabase DB 저장 완료
- [ ] OCR raw 텍스트 저장 완료 (output/{hospitalId}_ocr_raw.json)
- [ ] 스코어링 데이터 준비 완료

### 수동 확인 필요
- [ ] {있으면 기술. 예: "의사 2명 이름 uncertain → 병원 웹사이트 직접 확인"}
- [ ] {있으면 기술. 예: "가격 미확보 시술 15개 → 전화 확인 또는 방문 시 확인"}

### 비교 참고
| 항목 | 이전 크롤 (v{N}) | 이번 크롤 (v5.4) | 변화 |
|------|-------------------|-------------------|------|
| 의사 | {N}명 | {M}명 | +{차이} |
| 시술 | {N}개 | {M}개 | +{차이} |
| 장비 | {N}종 | {M}종 | +{차이} |
| 이벤트 | {N}건 | {M}건 | +{차이} |
```

---

## 보고서 작성 규칙 (Claude Code 준수)

### 필수 규칙
1. **모든 숫자는 실제 데이터 기반.** 추정/가정으로 숫자를 채우지 마라.
2. **빈 카테고리는 "0건"으로 표시.** 섹션을 생략하지 마라.
3. **0/0 = "N/A"**. 100%로 표기 금지.
4. **이전 크롤 데이터가 있으면 반드시 비교.** 변화량 표시.
5. **영업 인사이트는 반드시 작성.** 크롤링 결과의 최종 목적은 영업.
6. **이슈/경고 섹션에 거짓 안심 금지.** 문제가 있으면 명확히 기술.
7. **한줄 요약은 가장 중요한 팩트 위주로.** "성공적으로 완료"같은 빈말 금지.

### 최종 판정 기준
- **PASS**: 7개 카테고리 중 6개 이상 ✅, 🔴 심각 이슈 0건
- **CONDITIONAL PASS**: 5개 이상 ✅, 🔴 심각 이슈 0건, 🟡 주의 2건 이하
- **FAIL**: ✅ 4개 이하, 또는 🔴 심각 이슈 1건 이상

### 파일 저장
```
output/reports/report_{hospitalId}_{YYYYMMDD}.md    ← 보고서
output/{hospitalId}_ocr_raw.json                    ← OCR 원문 (디버깅용)
output/{hospitalId}_analysis.json                   ← 2단계 분류 결과 JSON
```
